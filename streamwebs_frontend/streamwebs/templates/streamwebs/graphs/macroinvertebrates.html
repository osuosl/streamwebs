{% extends "streamwebs/base.html" %}
{% load staticfiles %}
{% block title %}Macroinvertebrates - {{site.site_name}} -{% endblock %}
{% load i18n %}

{% block stylesheets %}
<style>
  .material-icons {
    font-size: 1.5em;
  }
</style>
{% endblock %}


{% block body_title %}
    <a href="/sites/{{site.site_slug}}">{{site.site_name}}</a>: {% trans "Macroinvertebrates" %}
{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <form action="">
            <div id="dates">
                <div class="col s2 offset-s1">
                    <h5>{% trans "Date range:" %}</h5>
                </div>
                <div class="col s4">
                    <label for="date-start">{% trans "After" %}</label>
                    <input type="date" name="date" id="date-start" class="datepicker" value="" />
                </div>
                <div class="col s4">
                    <label for="date-end">{% trans "Before" %}</label>
                    <input type="date" name="date" id="date-end" class="datepicker" value="" />
                </div>
            </div>
            <div id="type">
                <div class="col s2 offset-s1">
                    <h5>{% trans "Graph type:" %}</h5>
                </div>
                <div class="col s4">
                    <input type="radio" name="type" id="type-bar" value="bar" checked />
                    <label for="type-bar">{% trans "Summary" %}</label>
                </div>
                <div class="col s4">
                    <input type="radio" name="type" id="type-line" value="line" />
                    <label for="type-line">{% trans "Time" %}</label>
                </div>
            </div>
        </form>
    </div>  <!-- end date range/graph type row -->

    <div class="row">
        <div class="col s12" align="center">
        <h3 style="display:none" class="graph-header">Macroinvertebrates Over Time</h3>
        </div>
        <div id="graph-{{site.site_slug}}" class="graph line col s12" align="center">
        <div class="col s12">
        <h3 style="display:none" class="graph-header col s12">Sensitive species</h3>
        </div>
        <div id="graph-{{site.site_slug}}-sensitive" class="graph sensitive col s12"></div>
        <div class="col s12">
        <h3 style="display:none" class="graph-header">Somewhat sensitive species</h3>
        </div>
        <div id="graph-{{site.site_slug}}-somewhat" class="graph somewhat col 12"></div>
        <div class="col s12">
        <h3 style="display:none" class="graph-header">Tolerant species</h3>
        </div>
        <div id="graph-{{site.site_slug}}-tolerant" class="graph tolerant col s12"></div>

        <h3 style="display:none" class="graph-header">Species type breakdown</h3>
        <div id="graph-{{site.site_slug}}-pie" class="graph pie"></div>
    </div> <!-- end graphs row -->
</div>
{% endblock %}
{% block scripts %}
<script>
$('select').material_select();
$('.datepicker').pickadate({
    today: '',
    selectMonths: true, // Creates a dropdown to control month
    selectYears: 100, // Creates a dropdown of 15 years to control year
    max: true, // set max to today
    format: 'yyyy-mm-dd',
});
</script>

<script type="application/javascript">
    window.data_time = {{data.time|safe}};
    window.data_summ = {{data.summary|safe}};
    var siteId = '{{site.site_slug}}';
</script>
<script type="application/javascript" src="{% static 'streamwebs/js/graphs/macros.js' %}"></script>
{% endblock %}
