{% extends 'streamwebs/base.html' %}
{% load staticfiles %}
{% load i18n %}
{% load filters %}
{% block title %}{% trans "Riparian Transect" %}{% endblock %}
{% block body_title %}{% trans "Riparian Transect" %}{% endblock %}
{% block content %}

    {% if added %}
    <strong>{% trans "You have successfully submitted your Riparian Transect data sheet." %}</strong>
    
    {% else %}
        <form id='rip_trans_form' method='post'>
            {% csrf_token %}
            <table> <!-- main transect info table -->
                <tr>{{ transect_form.non_field_errors }}</tr>
                <tr>
                    <th align='left'>{{ transect_form.school.label }}</th>
                    <td>{{ transect_form.school }}</td>
                    <td>{{ transect_form.school.errors }}</td>
                </tr>
                <tr>
                    <th align='left'>{{ transect_form.date_time.label }}</th>
                    <td>{{ transect_form.date_time }}</td>
                    <td>{{ transect_form.date_time.errors }}</td>
                </tr>
                <tr>
                    <th align='left'>{{ transect_form.site.label }}</th>
                    <td>{{ transect_form.site }}</td>
                    <td>{{ transect_form.site.errors }}</td>
                </tr>
                <tr>
                    <th align='left'>{{ transect_form.slope.label }}</th>
                    <td>{{ transect_form.slope }}</td>
                    <td>{{ transect_form.slope.errors }}</td>
                </tr>
                <tr>
                    <th align='left'>{{ transect_form.weather.label }}</th>
                    <td>{{ transect_form.weather }}</td>
                    <td>{{ transect_form.weather.errors }}</td>
                </tr>
    
                {{ zone_formset.management_form }}
                <table> <!-- zones subtable -->
                    <tr>
                        <th>{{ 'zone'|get_zone_labels }}</th>
                        <th>{{ 'conifers'|get_zone_labels }}</th>
                        <th>{{ 'hardwoods'|get_zone_labels }}</th>
                        <th>{{ 'shrubs'|get_zone_labels }}</th>
                        <th>{{ 'comments'|get_zone_labels }}</th>
                    </tr>
                {% for zone_form in zone_formset %}
                    <tr>
                        <th></th>
                        <td>{{ zone_form.conifers.errors }}</td>
                        <td>{{ zone_form.hardwoods.errors }}</td>
                        <td>{{ zone_form.shrubs.errors }}</td>
                        <td>{{ zone_form.comments.errors }}</td>
                    </tr>
                    <tr>
                        <th>
                            {{ forloop.counter0|plus_one }}<br>
                            {{ forloop.counter0|get_zone }}
                        </th>
                        <td>{{ zone_form.conifers }}</td>
                        <td>{{ zone_form.hardwoods }}</td>
                        <td>{{ zone_form.shrubs }}</td>
                        <td>{{ zone_form.comments }}</td>
                    </tr>
                {% endfor %}
                </table> <!-- end zones subtable -->
    
                <tr>
                    <th align='left'>{{ transect_form.notes.label }}</th>
                    <td>{{ transect_form.notes }}</td>
                </tr>
            </table> <!-- end main transect info table -->
    
        <input type='submit', name='submit', value='Submit' />
        </form>
    {% endif %}

{% endblock %}

{% block scripts %}
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
    <script>
    $('select').material_select();
    </script>
{% endblock %}
