{% load staticfiles %}
{% load i18n %}

<div id="topbar">
  <form id="langform" action="/i18n/setlang/" method="post">
      {% csrf_token %}
      <input name="next" type="hidden" value="{{ request.path }}" />
      <input id="lang_input" name="language" type="hidden" />
      <ul id="languages" class="dropdown-content">
          {% for lang in LANGUAGES %}
              <li><a href="#!" onclick="submitLang('{{ lang.0 }}');">{{ lang.1 }}</a></li>
          {% endfor %}
      </ul>
  </form>
  
  <ul id="admin-options" class="dropdown-content">
    <!-- TODO: Real links -->
    <li><a href="#!">View Site Statistics</a></li> 
    <li><a href="#!">Upload Resources</a></li>
    <li><a href="#!">Manage Users</a></li>
  </ul>

  <nav class="cyan">
    <div class="nav-wrapper">
      <!--<a href="#!" class="brand-logo center">{% block body_title %}Streamwebs{% endblock %}</a>-->
      <ul class="left">
          <li>
              <a href="#!" class="dropdown-button" data-activates="languages">
                  {% for lang in LANGUAGES %}
                      {% if lang.0 == LANGUAGE_CODE %}
                          {{ lang.1 }}
                      {% endif %}
                  {% endfor %}
                  <i class="material-icons right">arrow_drop_down</i>
              </a>
          </li>
      </ul>

      <ul class="right">
        <li><a href="{% url 'streamwebs:sites' %}">Sites</a></li>
        <li><a href="{% url 'streamwebs:resources' %}">Resources</a></li>

        {% if user.is_authenticated %}
            {% for group in user.groups.all %}
                {% if group.name == 'admin' %}
                    <li><a class="dropdown-button" href="#!" data-activates="admin-options">Administration<i class="material-icons right">arrow_drop_down</i></a></li>
                {% endif %}
            {% endfor %}
            <li><a href="{% url 'streamwebs:logout' %}">Logout</a></li>
        {% else %}
            <li><a href="{% url 'streamwebs:register' %}">Create Account</a></li>
            <li><a href="{% url 'streamwebs:login' %}?next={{ request.path }}">Login</a></li>
        {% endif %}
      </ul>
    </div>
  </nav>
</div>
<!--<script>
    // Language submission
    function submitLang(language) {
        $('#lang_input').val(language);
        $('#langform').submit();
    }
</script>-->
